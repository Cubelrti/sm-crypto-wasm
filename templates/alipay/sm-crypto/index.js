"use strict";let o=null;function u(){const r="sm-crypto/worker.js";return new Promise((n,s)=>{try{o=my.createWorker(r,{useExperimentalWorker:!0}),o.onMessage(({id:e,result:t})=>{e===-1&&t==="ready"&&(console.log("Worker is ready"),n())}),o.onProcessKilled(console.log)}catch(e){console.warn(e),s(e)}})}let p=0;function c(r,n){return new Promise((s,e)=>{const t=p++,i=Date.now();o.postMessage({id:t,method:r,args:n}),o.onMessage(({id:l,result:a})=>{if(l===t){const m=Date.now();console.log(`[sm-crypto] perf: ${r} took ${m-i}ms`),s(a)}})})}function k(){return c("sm3",[6666])}function y(){return c("sm2_encrypt",[6666])}module.exports={initSMCrypto:u,sm3:k,sm2:y};
