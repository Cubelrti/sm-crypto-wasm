(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const a of c)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(c){const a={};return c.integrity&&(a.integrity=c.integrity),c.referrerPolicy&&(a.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?a.credentials="include":c.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(c){if(c.ep)return;c.ep=!0;const a=n(c);fetch(c.href,a)}})();let o;const S=new Array(128).fill(void 0);S.push(void 0,null,!0,!1);function s(e){return S[e]}let p=0,A=null;function O(){return(A===null||A.byteLength===0)&&(A=new Uint8Array(o.memory.buffer)),A}const F=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},q=typeof F.encodeInto=="function"?function(e,t){return F.encodeInto(e,t)}:function(e,t){const n=F.encode(e);return t.set(n),{read:e.length,written:n.length}};function L(e,t,n){if(n===void 0){const u=F.encode(e),d=t(u.length,1)>>>0;return O().subarray(d,d+u.length).set(u),p=u.length,d}let r=e.length,c=t(r,1)>>>0;const a=O();let i=0;for(;i<r;i++){const u=e.charCodeAt(i);if(u>127)break;a[c+i]=u}if(i!==r){i!==0&&(e=e.slice(i)),c=n(c,r,r=i+e.length*3,1)>>>0;const u=O().subarray(c+i,c+r),d=q(e,u);i+=d.written,c=n(c,r,i,1)>>>0}return p=i,c}function N(e){return e==null}let C=null;function b(){return(C===null||C.byteLength===0)&&(C=new Int32Array(o.memory.buffer)),C}const U=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&U.decode();function T(e,t){return e=e>>>0,U.decode(O().subarray(e,e+t))}let j=S.length;function l(e){j===S.length&&S.push(S.length+1);const t=j;return j=S[t],S[t]=e,t}function J(e){e<132||(S[e]=j,j=e)}function k(e){const t=s(e);return J(e),t}let B=null;function D(){return(B===null||B.byteLength===0)&&(B=new Float64Array(o.memory.buffer)),B}function P(e){const t=typeof e;if(t=="number"||t=="boolean"||e==null)return`${e}`;if(t=="string")return`"${e}"`;if(t=="symbol"){const c=e.description;return c==null?"Symbol":`Symbol(${c})`}if(t=="function"){const c=e.name;return typeof c=="string"&&c.length>0?`Function(${c})`:"Function"}if(Array.isArray(e)){const c=e.length;let a="[";c>0&&(a+=P(e[0]));for(let i=1;i<c;i++)a+=", "+P(e[i]);return a+="]",a}const n=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(n.length>1)r=n[1];else return toString.call(e);if(r=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:r}function v(e,t){const n=t(e.length*1,1)>>>0;return O().set(e,n/1),p=e.length,n}function V(e){const t=v(e,o.__wbindgen_malloc),n=p;o.init_rng_pool(t,n)}function I(e,t){return e=e>>>0,O().subarray(e/1,e/1+t)}function z(e){try{const c=o.__wbindgen_add_to_stack_pointer(-16),a=v(e,o.__wbindgen_malloc),i=p;o.sm3(c,a,i);var t=b()[c/4+0],n=b()[c/4+1],r=I(t,n).slice();return o.__wbindgen_free(t,n*1,1),r}finally{o.__wbindgen_add_to_stack_pointer(16)}}function G(e,t,n){try{const i=o.__wbindgen_add_to_stack_pointer(-16),u=L(e,o.__wbindgen_malloc,o.__wbindgen_realloc),d=p,f=v(t,o.__wbindgen_malloc),m=p;o.sm2_encrypt(i,u,d,f,m,l(n));var r=b()[i/4+0],c=b()[i/4+1],a=I(r,c).slice();return o.__wbindgen_free(r,c*1,1),a}finally{o.__wbindgen_add_to_stack_pointer(16)}}function Y(e,t,n){try{const i=o.__wbindgen_add_to_stack_pointer(-16),u=L(e,o.__wbindgen_malloc,o.__wbindgen_realloc),d=p,f=v(t,o.__wbindgen_malloc),m=p;o.sm2_decrypt(i,u,d,f,m,l(n));var r=b()[i/4+0],c=b()[i/4+1],a=I(r,c).slice();return o.__wbindgen_free(r,c*1,1),a}finally{o.__wbindgen_add_to_stack_pointer(16)}}function X(e,t,n){let r,c;try{const u=o.__wbindgen_add_to_stack_pointer(-16),d=L(e,o.__wbindgen_malloc,o.__wbindgen_realloc),f=p,m=v(t,o.__wbindgen_malloc),w=p;o.sm2_sign(u,d,f,m,w,l(n));var a=b()[u/4+0],i=b()[u/4+1];return r=a,c=i,T(a,i)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(r,c,1)}}function Q(e,t,n,r){const c=L(e,o.__wbindgen_malloc,o.__wbindgen_realloc),a=p,i=v(t,o.__wbindgen_malloc),u=p,d=L(n,o.__wbindgen_malloc,o.__wbindgen_realloc),f=p;return o.sm2_verify(c,a,i,u,d,f,l(r))!==0}function Z(){const e=o.sm2_generate_keypair();return k(e)}function ee(e){let t,n;try{const f=o.__wbindgen_add_to_stack_pointer(-16),m=L(e,o.__wbindgen_malloc,o.__wbindgen_realloc),w=p;o.compress_public_key_hex(f,m,w);var r=b()[f/4+0],c=b()[f/4+1],a=b()[f/4+2],i=b()[f/4+3],u=r,d=c;if(i)throw u=0,d=0,k(a);return t=u,n=d,T(u,d)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,n,1)}}function te(e,t){try{const a=o.__wbindgen_add_to_stack_pointer(-16),i=v(e,o.__wbindgen_malloc),u=p,d=v(t,o.__wbindgen_malloc),f=p;o.sm3_hmac(a,i,u,d,f);var n=b()[a/4+0],r=b()[a/4+1],c=I(n,r).slice();return o.__wbindgen_free(n,r*1,1),c}finally{o.__wbindgen_add_to_stack_pointer(16)}}function ne(e,t,n){try{const i=o.__wbindgen_add_to_stack_pointer(-16),u=v(e,o.__wbindgen_malloc),d=p,f=v(t,o.__wbindgen_malloc),m=p;o.sm4_encrypt(i,u,d,f,m,l(n));var r=b()[i/4+0],c=b()[i/4+1],a=I(r,c).slice();return o.__wbindgen_free(r,c*1,1),a}finally{o.__wbindgen_add_to_stack_pointer(16)}}function re(e,t,n){try{const i=o.__wbindgen_add_to_stack_pointer(-16),u=v(e,o.__wbindgen_malloc),d=p,f=v(t,o.__wbindgen_malloc),m=p;o.sm4_decrypt(i,u,d,f,m,l(n));var r=b()[i/4+0],c=b()[i/4+1],a=I(r,c).slice();return o.__wbindgen_free(r,c*1,1),a}finally{o.__wbindgen_add_to_stack_pointer(16)}}function E(e,t){try{return e.apply(this,t)}catch(n){o.__wbindgen_exn_store(l(n))}}async function ce(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(r){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function oe(){const e={};return e.wbg={},e.wbg.__wbindgen_is_undefined=function(t){return s(t)===void 0},e.wbg.__wbindgen_in=function(t,n){return s(t)in s(n)},e.wbg.__wbindgen_is_object=function(t){const n=s(t);return typeof n=="object"&&n!==null},e.wbg.__wbg_getwithrefkey_edc2c8960f0f1191=function(t,n){const r=s(t)[s(n)];return l(r)},e.wbg.__wbindgen_string_get=function(t,n){const r=s(n),c=typeof r=="string"?r:void 0;var a=N(c)?0:L(c,o.__wbindgen_malloc,o.__wbindgen_realloc),i=p;b()[t/4+1]=i,b()[t/4+0]=a},e.wbg.__wbindgen_boolean_get=function(t){const n=s(t);return typeof n=="boolean"?n?1:0:2},e.wbg.__wbg_isArray_2ab64d95e09ea0ae=function(t){return Array.isArray(s(t))},e.wbg.__wbg_length_cd7af8117672b8b8=function(t){return s(t).length},e.wbg.__wbg_get_bd8e338fbd5f5cc8=function(t,n){const r=s(t)[n>>>0];return l(r)},e.wbg.__wbg_iterator_2cee6dadfd956dfa=function(){return l(Symbol.iterator)},e.wbg.__wbg_get_e3c254076557e348=function(){return E(function(t,n){const r=Reflect.get(s(t),s(n));return l(r)},arguments)},e.wbg.__wbg_next_40fc327bfc8770e6=function(t){const n=s(t).next;return l(n)},e.wbg.__wbg_next_196c84450b364254=function(){return E(function(t){const n=s(t).next();return l(n)},arguments)},e.wbg.__wbg_done_298b57d23c0fc80c=function(t){return s(t).done},e.wbg.__wbg_value_d93c65011f51a456=function(t){const n=s(t).value;return l(n)},e.wbg.__wbg_isSafeInteger_f7b04ef02296c4d2=function(t){return Number.isSafeInteger(s(t))},e.wbg.__wbindgen_as_number=function(t){return+s(t)},e.wbg.__wbindgen_string_new=function(t,n){const r=T(t,n);return l(r)},e.wbg.__wbg_set_f975102236d3c502=function(t,n,r){s(t)[k(n)]=k(r)},e.wbg.__wbg_log_5bb5f88f245d7762=function(t){console.log(s(t))},e.wbg.__wbg_new_72fb9a18b5ae2624=function(){const t=new Object;return l(t)},e.wbg.__wbindgen_error_new=function(t,n){const r=new Error(T(t,n));return l(r)},e.wbg.__wbindgen_object_clone_ref=function(t){const n=s(t);return l(n)},e.wbg.__wbg_crypto_1d1f22824a6a080c=function(t){const n=s(t).crypto;return l(n)},e.wbg.__wbg_process_4a72847cc503995b=function(t){const n=s(t).process;return l(n)},e.wbg.__wbg_versions_f686565e586dd935=function(t){const n=s(t).versions;return l(n)},e.wbg.__wbg_node_104a2ff8d6ea03a2=function(t){const n=s(t).node;return l(n)},e.wbg.__wbindgen_is_string=function(t){return typeof s(t)=="string"},e.wbg.__wbg_require_cca90b1a94a0255b=function(){return E(function(){const t=module.require;return l(t)},arguments)},e.wbg.__wbg_call_b3ca7c6051f9bec1=function(){return E(function(t,n,r){const c=s(t).call(s(n),s(r));return l(c)},arguments)},e.wbg.__wbg_msCrypto_eb05e62b530a1508=function(t){const n=s(t).msCrypto;return l(n)},e.wbg.__wbg_newwithlength_e9b4878cebadb3d3=function(t){const n=new Uint8Array(t>>>0);return l(n)},e.wbg.__wbindgen_is_function=function(t){return typeof s(t)=="function"},e.wbg.__wbg_call_27c0f87801dedf93=function(){return E(function(t,n){const r=s(t).call(s(n));return l(r)},arguments)},e.wbg.__wbg_self_ce0dbfc45cf2f5be=function(){return E(function(){const t=self.self;return l(t)},arguments)},e.wbg.__wbg_window_c6fb939a7f436783=function(){return E(function(){const t=window.window;return l(t)},arguments)},e.wbg.__wbg_globalThis_d1e6af4856ba331b=function(){return E(function(){const t=globalThis.globalThis;return l(t)},arguments)},e.wbg.__wbg_global_207b558942527489=function(){return E(function(){const t=global.global;return l(t)},arguments)},e.wbg.__wbg_newnoargs_e258087cd0daa0ea=function(t,n){const r=new Function(T(t,n));return l(r)},e.wbg.__wbindgen_memory=function(){const t=o.memory;return l(t)},e.wbg.__wbg_buffer_12d079cc21e14bdb=function(t){const n=s(t).buffer;return l(n)},e.wbg.__wbg_new_63b92bc8671ed464=function(t){const n=new Uint8Array(s(t));return l(n)},e.wbg.__wbg_set_a47bac70306a19a7=function(t,n,r){s(t).set(s(n),r>>>0)},e.wbg.__wbg_length_c20a40f15020d68a=function(t){return s(t).length},e.wbg.__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb=function(t,n,r){const c=new Uint8Array(s(t),n>>>0,r>>>0);return l(c)},e.wbg.__wbg_randomFillSync_5c9c955aa56b6049=function(){return E(function(t,n){s(t).randomFillSync(k(n))},arguments)},e.wbg.__wbg_subarray_a1f73cd4b5b42fe1=function(t,n,r){const c=s(t).subarray(n>>>0,r>>>0);return l(c)},e.wbg.__wbg_getRandomValues_3aa56aa6edec874c=function(){return E(function(t,n){s(t).getRandomValues(s(n))},arguments)},e.wbg.__wbindgen_object_drop_ref=function(t){k(t)},e.wbg.__wbindgen_jsval_loose_eq=function(t,n){return s(t)==s(n)},e.wbg.__wbindgen_number_get=function(t,n){const r=s(n),c=typeof r=="number"?r:void 0;D()[t/8+1]=N(c)?0:c,b()[t/4+0]=!N(c)},e.wbg.__wbg_instanceof_Uint8Array_2b3bbecd033d19f6=function(t){let n;try{n=s(t)instanceof Uint8Array}catch{n=!1}return n},e.wbg.__wbg_instanceof_ArrayBuffer_836825be07d4c9d2=function(t){let n;try{n=s(t)instanceof ArrayBuffer}catch{n=!1}return n},e.wbg.__wbindgen_debug_string=function(t,n){const r=P(s(n)),c=L(r,o.__wbindgen_malloc,o.__wbindgen_realloc),a=p;b()[t/4+1]=a,b()[t/4+0]=c},e.wbg.__wbindgen_throw=function(t,n){throw new Error(T(t,n))},e}function ie(e,t){return o=e.exports,R.__wbindgen_wasm_module=t,B=null,C=null,A=null,o.__wbindgen_start(),o}async function R(e){if(o!==void 0)return o;typeof e>"u"&&(e=new URL("/assets/index_bg-DgYLJXza.wasm",import.meta.url));const t=oe();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:r}=await ce(await e,t);return ie(n,r)}function h(e){const t=[];for(let n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return new Uint8Array(t)}function M(e){return Array.prototype.map.call(e,t=>("00"+t.toString(16)).slice(-2)).join("")}function $(e){return new TextEncoder().encode(e)}function W(e){return new TextDecoder().decode(e)}let K=null;async function ae(){if(!K)try{const e=await R(void 0);console.log("init sm-crypto-wasm direct success",e),K=e}catch(e){console.log("init sm-crypto-wasm direct failed",e),K=null}}const x={initSMCrypto:ae,sm2:{generateKeyPairHex:Z,compressPublicKeyHex:ee,encrypt(e,t,n){n=Object.assign({cipherMode:1,asn1:!1,output:"array"},n),e=typeof e=="string"?h(e):e;const r=G(t,e,{asn1:n.asn1,c1c2c3:n.cipherMode===0});return n.output==="string"?M(r):r},decrypt(e,t,n){n=Object.assign({cipherMode:1,asn1:!1,output:"array"},n),e=typeof e=="string"?h(e):e;const r=Y(t,e,{asn1:n.asn1,c1c2c3:n.cipherMode===0});return n.output==="string"?M(r):r},doSignature(e,t,n){return e=typeof e=="string"?h(e):e,n=Object.assign({hash:!0,der:!0},n),X(t,e,n)},doVerifySignature(e,t,n,r){return e=typeof e=="string"?h(e):e,r=Object.assign({hash:!0,der:!0},r),Q(t,e,n,r)},initRNGPool:V},sm3:z,hmac:te,sm4:{encrypt(e,t,n){n=Object.assign({mode:"cbc",padding:"pkcs7",output:"array"},n),n.iv=n.iv?typeof n.iv=="string"?h(n.iv):n.iv:void 0,n.aad=n.aad?typeof n.aad=="string"?h(n.aad):n.aad:void 0,t=typeof t=="string"?h(t):t;const r=ne(e,t,{mode:n.mode,padding:n.padding,iv:n.iv,aad:n.aad});return n.output==="string"?M(r):r},decrypt(e,t,n){n=Object.assign({mode:"cbc",padding:"pkcs7",output:"array"},n),n.iv=n.iv?typeof n.iv=="string"?h(n.iv):n.iv:void 0,n.aad=n.aad?typeof n.aad=="string"?h(n.aad):n.aad:void 0,t=typeof t=="string"?h(t):t;const r=re(e,t,{mode:n.mode,padding:n.padding,iv:n.iv,aad:n.aad});return n.output==="string"?M(r):r}}};document.querySelector("#app").innerHTML=`
  <div class="sidebar">
        <button id="sm2">SM2</button>
        <button id="sm3">SM3</button>
        <button id="sm4">SM4</button>
    </div>
    <div class="content">
        <div class="header">
            <h1>sm-crypto-wasm Playground</h1>
        </div>
        <div class="playground">
            <div class="settings">
                <h2>Input</h2>
                <label for="operation">Operation</label>
                <select id="operation">
                    <option value="">Select Algorithm First</option>
                </select>
                <div id="settings"></div>
                <h2>Messages</h2>
                <label for="encoding">Encoding</label>
                <select id="encoding">
                    <option value="utf8">UTF-8</option>
                    <option value="hex">Hex</option>
                </select>
                <textarea id="content" rows="4" placeholder="Input data"></textarea>
                <button id="run">Run</button>
            </div>
            <div class="output">
                <h2>Output</h2>
                <p id="output">Your output will be displayed here.</p>
            </div>
        </div>
    </div>
`;x.initSMCrypto().then(console.log);document.getElementById("sm2").addEventListener("click",async()=>{const e=document.getElementById("operation");e.innerHTML="",Object.keys(x.sm2).forEach(w=>{const g=document.createElement("option");g.value=w,g.text=w,e.appendChild(g)});const t=document.createElement("textarea");t.placeholder="Public Key (hex)",t.id="public-key";const n=document.createElement("textarea");n.placeholder="Private Key (hex)",n.id="private-key";const r=document.createElement("textarea");r.placeholder="Signature (hex)",r.id="signature";const c=document.createElement("input");c.type="checkbox",c.id="der",c.checked=!0;const a=document.createElement("label");a.htmlFor="der",a.textContent="ASN.1 Encoding?";const i=document.createElement("input");i.type="checkbox",i.id="hash",i.checked=!0;const u=document.createElement("label");u.htmlFor="hash",u.textContent="Hash before signing?";const d=document.getElementById("settings");d.innerHTML="",d.appendChild(t),d.appendChild(n),d.appendChild(r),d.appendChild(a),d.appendChild(c),d.appendChild(u),d.appendChild(i),e.value="generateKeyPairHex";const f=document.getElementById("content"),m=document.getElementById("encoding");document.getElementById("run").addEventListener("click",async()=>{const w=e.value,g=document.getElementById("output");g.innerHTML="";let y=f.value;switch(w){case"encrypt":case"decrypt":m.value==="hex"?y=h(y):y=$(y);try{let _=x.sm2[w](y,w==="encrypt"?t.value:n.value,{output:"array"});const H={hex:M(_)};w==="decrypt"&&(H.utf8=W(_)),g.innerHTML=`<p>${JSON.stringify(H,null,2)}</p>`}catch(_){console.error(_),g.innerHTML=`<p>${_.toString()}</p>`}break;case"generateKeyPairHex":try{const _=x.sm2[w]();g.innerHTML=`<p>${JSON.stringify(_,null,2)}</p>`,t.value=_.publicKey,n.value=_.privateKey}catch(_){console.error(_),g.innerHTML=`<p>${_}</p>`}break;case"doSignature":m.value==="hex"?y=h(y):y=$(y);try{let _=x.sm2.doSignature(y,n.value,{der:c.checked,hash:i.checked});g.innerHTML=`<p>${JSON.stringify(_,null,2)}</p>`,r.value=_}catch(_){console.error(_),g.innerHTML=`<p>${_.toString()}</p>`}break;case"doVerifySignature":m.value==="hex"?y=h(y):y=$(y);try{let _=x.sm2.doVerifySignature(y,t.value,r.value,{der:c.checked,hash:i.checked});g.innerHTML=`<p>${JSON.stringify(_,null,2)}</p>`}catch(_){console.error(_),g.innerHTML=`<p>${_.toString()}</p>`}break;case"compressPublicKeyHex":try{let _=x.sm2.compressPublicKeyHex(t.value);g.innerHTML=`<p>${JSON.stringify(_,null,2)}</p>`,t.value=_}catch(_){console.error(_),g.innerHTML=`<p>${_.toString()}</p>`}break;default:g.innerHTML=`<p>Operation ${w} is not available for playground.</p>`}})});document.getElementById("sm3").addEventListener("click",async()=>{const e=document.getElementById("operation");e.innerHTML="";const t=document.createElement("option");t.value="hash",t.text="hash",e.appendChild(t);const n=document.getElementById("settings");n.innerHTML="",e.value="hash";const r=document.getElementById("content"),c=document.getElementById("encoding");document.getElementById("run").addEventListener("click",async()=>{e.value;const a=document.getElementById("output");a.innerHTML="";let i=r.value;c.value==="hex"?i=h(i):i=$(i);try{let u=x.sm3(i);const d={hex:M(u)};a.innerHTML=`<p>${JSON.stringify(d,null,2)}</p>`}catch(u){console.error(u),a.innerHTML=`<p>${u.toString()}</p>`}})});document.getElementById("sm4").addEventListener("click",async()=>{const e=document.getElementById("operation");e.innerHTML="",Object.keys(x.sm4).forEach(w=>{const g=document.createElement("option");g.value=w,g.text=w,e.appendChild(g)});const t=document.createElement("textarea");t.placeholder="Key (hex), 16 bytes, required",t.id="key";const n=document.createElement("textarea");n.placeholder="IV (hex), 12 bytes for gcm, 16 bytes for others, required for cbc, ctr, gcm",n.id="iv";const r=document.createElement("select");r.id="mode",["cbc","ecb","ctr","gcm"].forEach(w=>{const g=document.createElement("option");g.value=w,g.text=w,r.appendChild(g)});const a=document.createElement("textarea");a.placeholder="AAD for GCM (hex)",a.id="aad";const i=document.createElement("input");i.type="checkbox",i.id="padding",i.checked=!0;const u=document.createElement("label");u.htmlFor="padding",u.textContent="PKCS7?";const d=document.getElementById("settings");d.innerHTML="",d.appendChild(t),d.appendChild(n),d.appendChild(r),d.appendChild(a),d.appendChild(u),d.appendChild(i),e.value="encrypt";const f=document.getElementById("content"),m=document.getElementById("encoding");m.value="hex",document.getElementById("run").addEventListener("click",async()=>{const w=e.value,g=document.getElementById("output");g.innerHTML="";let y=f.value;m.value==="hex"?y=h(y):y=$(y);try{let _=x.sm4[w](y,h(t.value),{iv:h(n.value),output:"array",mode:r.value,aad:h(a.value),padding:i.checked?"pkcs7":"none"});const H={hex:M(_)};w==="decrypt"&&(H.utf8=W(_)),g.innerHTML=`<p>${JSON.stringify(H,null,2)}</p>`}catch(_){console.error(_),g.innerHTML=`<p>${_.toString()}</p>`}})});
