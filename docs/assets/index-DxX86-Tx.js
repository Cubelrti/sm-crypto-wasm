(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const a of c)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(c){const a={};return c.integrity&&(a.integrity=c.integrity),c.referrerPolicy&&(a.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?a.credentials="include":c.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(c){if(c.ep)return;c.ep=!0;const a=n(c);fetch(c.href,a)}})();let o;const M=new Array(128).fill(void 0);M.push(void 0,null,!0,!1);function s(t){return M[t]}let p=0,A=null;function O(){return(A===null||A.byteLength===0)&&(A=new Uint8Array(o.memory.buffer)),A}const F=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},q=typeof F.encodeInto=="function"?function(t,e){return F.encodeInto(t,e)}:function(t,e){const n=F.encode(t);return e.set(n),{read:t.length,written:n.length}};function S(t,e,n){if(n===void 0){const d=F.encode(t),u=e(d.length,1)>>>0;return O().subarray(u,u+d.length).set(d),p=d.length,u}let r=t.length,c=e(r,1)>>>0;const a=O();let i=0;for(;i<r;i++){const d=t.charCodeAt(i);if(d>127)break;a[c+i]=d}if(i!==r){i!==0&&(t=t.slice(i)),c=n(c,r,r=i+t.length*3,1)>>>0;const d=O().subarray(c+i,c+r),u=q(t,d);i+=u.written,c=n(c,r,i,1)>>>0}return p=i,c}function N(t){return t==null}let C=null;function b(){return(C===null||C.byteLength===0)&&(C=new Int32Array(o.memory.buffer)),C}const U=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&U.decode();function k(t,e){return t=t>>>0,U.decode(O().subarray(t,t+e))}let j=M.length;function l(t){j===M.length&&M.push(M.length+1);const e=j;return j=M[e],M[e]=t,e}function D(t){t<132||(M[t]=j,j=t)}function L(t){const e=s(t);return D(t),e}let B=null;function J(){return(B===null||B.byteLength===0)&&(B=new Float64Array(o.memory.buffer)),B}function P(t){const e=typeof t;if(e=="number"||e=="boolean"||t==null)return`${t}`;if(e=="string")return`"${t}"`;if(e=="symbol"){const c=t.description;return c==null?"Symbol":`Symbol(${c})`}if(e=="function"){const c=t.name;return typeof c=="string"&&c.length>0?`Function(${c})`:"Function"}if(Array.isArray(t)){const c=t.length;let a="[";c>0&&(a+=P(t[0]));for(let i=1;i<c;i++)a+=", "+P(t[i]);return a+="]",a}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let r;if(n.length>1)r=n[1];else return toString.call(t);if(r=="Object")try{return"Object("+JSON.stringify(t)+")"}catch{return"Object"}return t instanceof Error?`${t.name}: ${t.message}
${t.stack}`:r}function v(t,e){const n=e(t.length*1,1)>>>0;return O().set(t,n/1),p=t.length,n}function V(t){const e=v(t,o.__wbindgen_malloc),n=p;o.init_rng_pool(e,n)}function I(t,e){return t=t>>>0,O().subarray(t/1,t/1+e)}function G(t){try{const c=o.__wbindgen_add_to_stack_pointer(-16),a=v(t,o.__wbindgen_malloc),i=p;o.sm3(c,a,i);var e=b()[c/4+0],n=b()[c/4+1],r=I(e,n).slice();return o.__wbindgen_free(e,n*1,1),r}finally{o.__wbindgen_add_to_stack_pointer(16)}}function z(t,e,n){try{const i=o.__wbindgen_add_to_stack_pointer(-16),d=S(t,o.__wbindgen_malloc,o.__wbindgen_realloc),u=p,g=v(e,o.__wbindgen_malloc),h=p;o.sm2_encrypt(i,d,u,g,h,l(n));var r=b()[i/4+0],c=b()[i/4+1],a=I(r,c).slice();return o.__wbindgen_free(r,c*1,1),a}finally{o.__wbindgen_add_to_stack_pointer(16)}}function Y(t,e,n){try{const i=o.__wbindgen_add_to_stack_pointer(-16),d=S(t,o.__wbindgen_malloc,o.__wbindgen_realloc),u=p,g=v(e,o.__wbindgen_malloc),h=p;o.sm2_decrypt(i,d,u,g,h,l(n));var r=b()[i/4+0],c=b()[i/4+1],a=I(r,c).slice();return o.__wbindgen_free(r,c*1,1),a}finally{o.__wbindgen_add_to_stack_pointer(16)}}function Q(t,e,n){let r,c;try{const d=o.__wbindgen_add_to_stack_pointer(-16),u=S(t,o.__wbindgen_malloc,o.__wbindgen_realloc),g=p,h=v(e,o.__wbindgen_malloc),y=p;o.sm2_sign(d,u,g,h,y,l(n));var a=b()[d/4+0],i=b()[d/4+1];return r=a,c=i,k(a,i)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(r,c,1)}}function X(t,e,n,r){const c=S(t,o.__wbindgen_malloc,o.__wbindgen_realloc),a=p,i=v(e,o.__wbindgen_malloc),d=p,u=S(n,o.__wbindgen_malloc,o.__wbindgen_realloc),g=p;return o.sm2_verify(c,a,i,d,u,g,l(r))!==0}function Z(){const t=o.sm2_generate_keypair();return L(t)}function ee(t){let e,n;try{const g=o.__wbindgen_add_to_stack_pointer(-16),h=S(t,o.__wbindgen_malloc,o.__wbindgen_realloc),y=p;o.compress_public_key_hex(g,h,y);var r=b()[g/4+0],c=b()[g/4+1],a=b()[g/4+2],i=b()[g/4+3],d=r,u=c;if(i)throw d=0,u=0,L(a);return e=d,n=u,k(d,u)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(e,n,1)}}function te(t,e){try{const a=o.__wbindgen_add_to_stack_pointer(-16),i=v(t,o.__wbindgen_malloc),d=p,u=v(e,o.__wbindgen_malloc),g=p;o.sm3_hmac(a,i,d,u,g);var n=b()[a/4+0],r=b()[a/4+1],c=I(n,r).slice();return o.__wbindgen_free(n,r*1,1),c}finally{o.__wbindgen_add_to_stack_pointer(16)}}function ne(t,e,n){try{const i=o.__wbindgen_add_to_stack_pointer(-16),d=v(t,o.__wbindgen_malloc),u=p,g=v(e,o.__wbindgen_malloc),h=p;o.sm4_encrypt(i,d,u,g,h,l(n));var r=b()[i/4+0],c=b()[i/4+1],a=I(r,c).slice();return o.__wbindgen_free(r,c*1,1),a}finally{o.__wbindgen_add_to_stack_pointer(16)}}function re(t,e,n){try{const i=o.__wbindgen_add_to_stack_pointer(-16),d=v(t,o.__wbindgen_malloc),u=p,g=v(e,o.__wbindgen_malloc),h=p;o.sm4_decrypt(i,d,u,g,h,l(n));var r=b()[i/4+0],c=b()[i/4+1],a=I(r,c).slice();return o.__wbindgen_free(r,c*1,1),a}finally{o.__wbindgen_add_to_stack_pointer(16)}}function x(t,e){try{return t.apply(this,e)}catch(n){o.__wbindgen_exn_store(l(n))}}async function ce(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(r){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function oe(){const t={};return t.wbg={},t.wbg.__wbindgen_is_undefined=function(e){return s(e)===void 0},t.wbg.__wbindgen_in=function(e,n){return s(e)in s(n)},t.wbg.__wbindgen_is_object=function(e){const n=s(e);return typeof n=="object"&&n!==null},t.wbg.__wbg_getwithrefkey_edc2c8960f0f1191=function(e,n){const r=s(e)[s(n)];return l(r)},t.wbg.__wbindgen_string_get=function(e,n){const r=s(n),c=typeof r=="string"?r:void 0;var a=N(c)?0:S(c,o.__wbindgen_malloc,o.__wbindgen_realloc),i=p;b()[e/4+1]=i,b()[e/4+0]=a},t.wbg.__wbindgen_boolean_get=function(e){const n=s(e);return typeof n=="boolean"?n?1:0:2},t.wbg.__wbg_isArray_2ab64d95e09ea0ae=function(e){return Array.isArray(s(e))},t.wbg.__wbg_length_cd7af8117672b8b8=function(e){return s(e).length},t.wbg.__wbg_get_bd8e338fbd5f5cc8=function(e,n){const r=s(e)[n>>>0];return l(r)},t.wbg.__wbg_iterator_2cee6dadfd956dfa=function(){return l(Symbol.iterator)},t.wbg.__wbg_get_e3c254076557e348=function(){return x(function(e,n){const r=Reflect.get(s(e),s(n));return l(r)},arguments)},t.wbg.__wbg_next_40fc327bfc8770e6=function(e){const n=s(e).next;return l(n)},t.wbg.__wbg_next_196c84450b364254=function(){return x(function(e){const n=s(e).next();return l(n)},arguments)},t.wbg.__wbg_done_298b57d23c0fc80c=function(e){return s(e).done},t.wbg.__wbg_value_d93c65011f51a456=function(e){const n=s(e).value;return l(n)},t.wbg.__wbg_isSafeInteger_f7b04ef02296c4d2=function(e){return Number.isSafeInteger(s(e))},t.wbg.__wbindgen_as_number=function(e){return+s(e)},t.wbg.__wbindgen_string_new=function(e,n){const r=k(e,n);return l(r)},t.wbg.__wbg_set_f975102236d3c502=function(e,n,r){s(e)[L(n)]=L(r)},t.wbg.__wbg_log_5bb5f88f245d7762=function(e){console.log(s(e))},t.wbg.__wbg_new_72fb9a18b5ae2624=function(){const e=new Object;return l(e)},t.wbg.__wbindgen_error_new=function(e,n){const r=new Error(k(e,n));return l(r)},t.wbg.__wbindgen_object_clone_ref=function(e){const n=s(e);return l(n)},t.wbg.__wbg_crypto_1d1f22824a6a080c=function(e){const n=s(e).crypto;return l(n)},t.wbg.__wbg_process_4a72847cc503995b=function(e){const n=s(e).process;return l(n)},t.wbg.__wbg_versions_f686565e586dd935=function(e){const n=s(e).versions;return l(n)},t.wbg.__wbg_node_104a2ff8d6ea03a2=function(e){const n=s(e).node;return l(n)},t.wbg.__wbindgen_is_string=function(e){return typeof s(e)=="string"},t.wbg.__wbg_require_cca90b1a94a0255b=function(){return x(function(){const e=module.require;return l(e)},arguments)},t.wbg.__wbg_call_b3ca7c6051f9bec1=function(){return x(function(e,n,r){const c=s(e).call(s(n),s(r));return l(c)},arguments)},t.wbg.__wbg_msCrypto_eb05e62b530a1508=function(e){const n=s(e).msCrypto;return l(n)},t.wbg.__wbg_newwithlength_e9b4878cebadb3d3=function(e){const n=new Uint8Array(e>>>0);return l(n)},t.wbg.__wbindgen_is_function=function(e){return typeof s(e)=="function"},t.wbg.__wbg_call_27c0f87801dedf93=function(){return x(function(e,n){const r=s(e).call(s(n));return l(r)},arguments)},t.wbg.__wbg_self_ce0dbfc45cf2f5be=function(){return x(function(){const e=self.self;return l(e)},arguments)},t.wbg.__wbg_window_c6fb939a7f436783=function(){return x(function(){const e=window.window;return l(e)},arguments)},t.wbg.__wbg_globalThis_d1e6af4856ba331b=function(){return x(function(){const e=globalThis.globalThis;return l(e)},arguments)},t.wbg.__wbg_global_207b558942527489=function(){return x(function(){const e=global.global;return l(e)},arguments)},t.wbg.__wbg_newnoargs_e258087cd0daa0ea=function(e,n){const r=new Function(k(e,n));return l(r)},t.wbg.__wbindgen_memory=function(){const e=o.memory;return l(e)},t.wbg.__wbg_buffer_12d079cc21e14bdb=function(e){const n=s(e).buffer;return l(n)},t.wbg.__wbg_new_63b92bc8671ed464=function(e){const n=new Uint8Array(s(e));return l(n)},t.wbg.__wbg_set_a47bac70306a19a7=function(e,n,r){s(e).set(s(n),r>>>0)},t.wbg.__wbg_length_c20a40f15020d68a=function(e){return s(e).length},t.wbg.__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb=function(e,n,r){const c=new Uint8Array(s(e),n>>>0,r>>>0);return l(c)},t.wbg.__wbg_randomFillSync_5c9c955aa56b6049=function(){return x(function(e,n){s(e).randomFillSync(L(n))},arguments)},t.wbg.__wbg_subarray_a1f73cd4b5b42fe1=function(e,n,r){const c=s(e).subarray(n>>>0,r>>>0);return l(c)},t.wbg.__wbg_getRandomValues_3aa56aa6edec874c=function(){return x(function(e,n){s(e).getRandomValues(s(n))},arguments)},t.wbg.__wbindgen_object_drop_ref=function(e){L(e)},t.wbg.__wbindgen_jsval_loose_eq=function(e,n){return s(e)==s(n)},t.wbg.__wbindgen_number_get=function(e,n){const r=s(n),c=typeof r=="number"?r:void 0;J()[e/8+1]=N(c)?0:c,b()[e/4+0]=!N(c)},t.wbg.__wbg_instanceof_Uint8Array_2b3bbecd033d19f6=function(e){let n;try{n=s(e)instanceof Uint8Array}catch{n=!1}return n},t.wbg.__wbg_instanceof_ArrayBuffer_836825be07d4c9d2=function(e){let n;try{n=s(e)instanceof ArrayBuffer}catch{n=!1}return n},t.wbg.__wbindgen_debug_string=function(e,n){const r=P(s(n)),c=S(r,o.__wbindgen_malloc,o.__wbindgen_realloc),a=p;b()[e/4+1]=a,b()[e/4+0]=c},t.wbg.__wbindgen_throw=function(e,n){throw new Error(k(e,n))},t}function ie(t,e){return o=t.exports,R.__wbindgen_wasm_module=e,B=null,C=null,A=null,o.__wbindgen_start(),o}async function R(t){if(o!==void 0)return o;typeof t>"u"&&(t=new URL("/assets/index_bg-DTy5Lvax.wasm",import.meta.url));const e=oe();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await ce(await t,e);return ie(n,r)}function w(t){const e=[];for(let n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return new Uint8Array(e)}function T(t){return Array.prototype.map.call(t,e=>("00"+e.toString(16)).slice(-2)).join("")}function $(t){return new TextEncoder().encode(t)}function W(t){return new TextDecoder().decode(t)}let K=null;async function ae(){if(!K)try{const t=await R(void 0);console.log("init sm-crypto-wasm direct success",t),K=t}catch(t){console.log("init sm-crypto-wasm direct failed",t),K=null}}const E={initSMCrypto:ae,sm2:{generateKeyPairHex:Z,compressPublicKeyHex:ee,encrypt(t,e,n){n=Object.assign({cipherMode:1,asn1:!1,output:"array"},n),t=typeof t=="string"?w(t):t;const r=z(e,t,{asn1:n.asn1,c1c2c3:n.cipherMode===0});return n.output==="string"?T(r):r},decrypt(t,e,n){n=Object.assign({cipherMode:1,asn1:!1,output:"array"},n),t=typeof t=="string"?w(t):t;const r=Y(e,t,{asn1:n.asn1,c1c2c3:n.cipherMode===0});return n.output==="string"?T(r):r},doSignature(t,e,n){return t=typeof t=="string"?w(t):t,n=Object.assign({hash:!0,der:!0},n),Q(e,t,n)},doVerifySignature(t,e,n,r){return t=typeof t=="string"?w(t):t,r=Object.assign({hash:!0,der:!0},r),X(e,t,n,r)},initRNGPool:V},sm3(t,e){t=typeof t=="string"?w(t):t;let n=e!=null&&e.key?typeof(e==null?void 0:e.key)=="string"?w(e.key):e.key:void 0;return n?te(n,t):G(t)},sm4:{encrypt(t,e,n){n=Object.assign({mode:"cbc",padding:"pkcs7",output:"array"},n),n.iv=n.iv?typeof n.iv=="string"?w(n.iv):n.iv:void 0,n.aad=n.aad?typeof n.aad=="string"?w(n.aad):n.aad:void 0,e=typeof e=="string"?w(e):e;const r=ne(t,e,{mode:n.mode,padding:n.padding,iv:n.iv,aad:n.aad});return n.output==="string"?T(r):r},decrypt(t,e,n){n=Object.assign({mode:"cbc",padding:"pkcs7",output:"array"},n),n.iv=n.iv?typeof n.iv=="string"?w(n.iv):n.iv:void 0,n.aad=n.aad?typeof n.aad=="string"?w(n.aad):n.aad:void 0,e=typeof e=="string"?w(e):e;const r=re(t,e,{mode:n.mode,padding:n.padding,iv:n.iv,aad:n.aad});return n.output==="string"?T(r):r}}};document.querySelector("#app").innerHTML=`
  <div class="sidebar">
        <button id="sm2">SM2</button>
        <button id="sm3">SM3</button>
        <button id="sm4">SM4</button>
    </div>
    <div class="content">
        <div class="header">
            <h1>sm-crypto-wasm Playground</h1>
        </div>
        <div class="playground">
            <div class="settings">
                <h2>Input</h2>
                <label for="operation">Operation</label>
                <select id="operation">
                    <option value="">Select Algorithm First</option>
                </select>
                <div id="settings"></div>
                <h2>Messages</h2>
                <label for="encoding">Encoding</label>
                <select id="encoding">
                    <option value="utf8">UTF-8</option>
                    <option value="hex">Hex</option>
                </select>
                <textarea id="content" rows="4" placeholder="Input data"></textarea>
                <button id="run">Run</button>
            </div>
            <div class="output">
                <h2>Output</h2>
                <p id="output">Your output will be displayed here.</p>
            </div>
        </div>
    </div>
`;E.initSMCrypto().then(console.log);document.getElementById("sm2").addEventListener("click",async()=>{const t=document.getElementById("operation");t.innerHTML="",Object.keys(E.sm2).forEach(y=>{const f=document.createElement("option");f.value=y,f.text=y,t.appendChild(f)});const e=document.createElement("textarea");e.placeholder="Public Key (hex)",e.id="public-key";const n=document.createElement("textarea");n.placeholder="Private Key (hex)",n.id="private-key";const r=document.createElement("textarea");r.placeholder="Signature (hex)",r.id="signature";const c=document.createElement("input");c.type="checkbox",c.id="der",c.checked=!0;const a=document.createElement("label");a.htmlFor="der",a.textContent="ASN.1 Encoding?";const i=document.createElement("input");i.type="checkbox",i.id="hash",i.checked=!0;const d=document.createElement("label");d.htmlFor="hash",d.textContent="Hash before signing?";const u=document.getElementById("settings");u.innerHTML="",u.appendChild(e),u.appendChild(n),u.appendChild(r),u.appendChild(a),u.appendChild(c),u.appendChild(d),u.appendChild(i),t.value="generateKeyPairHex";const g=document.getElementById("content"),h=document.getElementById("encoding");document.getElementById("run").addEventListener("click",async()=>{const y=t.value,f=document.getElementById("output");f.innerHTML="";let m=g.value;switch(y){case"encrypt":case"decrypt":h.value==="hex"?m=w(m):m=$(m);try{let _=E.sm2[y](m,y==="encrypt"?e.value:n.value,{output:"array"});const H={hex:T(_)};y==="decrypt"&&(H.utf8=W(_)),f.innerHTML=`<p>${JSON.stringify(H,null,2)}</p>`}catch(_){console.error(_),f.innerHTML=`<p>${_.toString()}</p>`}break;case"generateKeyPairHex":try{const _=E.sm2[y]();f.innerHTML=`<p>${JSON.stringify(_,null,2)}</p>`,e.value=_.publicKey,n.value=_.privateKey}catch(_){console.error(_),f.innerHTML=`<p>${_}</p>`}break;case"doSignature":h.value==="hex"?m=w(m):m=$(m);try{let _=E.sm2.doSignature(m,n.value,{der:c.checked,hash:i.checked});f.innerHTML=`<p>${JSON.stringify(_,null,2)}</p>`,r.value=_}catch(_){console.error(_),f.innerHTML=`<p>${_.toString()}</p>`}break;case"doVerifySignature":h.value==="hex"?m=w(m):m=$(m);try{let _=E.sm2.doVerifySignature(m,e.value,r.value,{der:c.checked,hash:i.checked});f.innerHTML=`<p>${JSON.stringify(_,null,2)}</p>`}catch(_){console.error(_),f.innerHTML=`<p>${_.toString()}</p>`}break;case"compressPublicKeyHex":try{let _=E.sm2.compressPublicKeyHex(e.value);f.innerHTML=`<p>${JSON.stringify(_,null,2)}</p>`,e.value=_}catch(_){console.error(_),f.innerHTML=`<p>${_.toString()}</p>`}break;default:f.innerHTML=`<p>Operation ${y} is not available for playground.</p>`}})});document.getElementById("sm3").addEventListener("click",async()=>{const t=document.getElementById("operation");t.innerHTML="";const e=document.createElement("option");e.value="hash",e.text="hash",t.appendChild(e);const n=document.getElementById("settings");n.innerHTML="";const r=document.createElement("textarea");r.placeholder="HMAC Key (hex), optional",r.id="hmac",n.appendChild(r),t.value="hash";const c=document.getElementById("content"),a=document.getElementById("encoding");document.getElementById("run").addEventListener("click",async()=>{t.value;const i=document.getElementById("output");i.innerHTML="";let d=c.value;a.value==="hex"?d=w(d):d=$(d);try{let u=E.sm3(d,{key:r.value?w(r.value):void 0});const g={hex:T(u)};i.innerHTML=`<p>${JSON.stringify(g,null,2)}</p>`}catch(u){console.error(u),i.innerHTML=`<p>${u.toString()}</p>`}})});document.getElementById("sm4").addEventListener("click",async()=>{const t=document.getElementById("operation");t.innerHTML="",Object.keys(E.sm4).forEach(y=>{const f=document.createElement("option");f.value=y,f.text=y,t.appendChild(f)});const e=document.createElement("textarea");e.placeholder="Key (hex), 16 bytes, required",e.id="key";const n=document.createElement("textarea");n.placeholder="IV (hex), 12 bytes for gcm, 16 bytes for others, required for cbc, ctr, gcm",n.id="iv";const r=document.createElement("select");r.id="mode",["cbc","ecb","ctr","gcm"].forEach(y=>{const f=document.createElement("option");f.value=y,f.text=y,r.appendChild(f)});const a=document.createElement("textarea");a.placeholder="AAD for GCM (hex)",a.id="aad";const i=document.createElement("input");i.type="checkbox",i.id="padding",i.checked=!0;const d=document.createElement("label");d.htmlFor="padding",d.textContent="PKCS7?";const u=document.getElementById("settings");u.innerHTML="",u.appendChild(e),u.appendChild(n),u.appendChild(r),u.appendChild(a),u.appendChild(d),u.appendChild(i),t.value="encrypt";const g=document.getElementById("content"),h=document.getElementById("encoding");h.value="hex",document.getElementById("run").addEventListener("click",async()=>{const y=t.value,f=document.getElementById("output");f.innerHTML="";let m=g.value;h.value==="hex"?m=w(m):m=$(m);try{let _=E.sm4[y](m,w(e.value),{iv:w(n.value),output:"array",mode:r.value,aad:w(a.value),padding:i.checked?"pkcs7":"none"});const H={hex:T(_)};y==="decrypt"&&(H.utf8=W(_)),f.innerHTML=`<p>${JSON.stringify(H,null,2)}</p>`}catch(_){console.error(_),f.innerHTML=`<p>${_.toString()}</p>`}})});
